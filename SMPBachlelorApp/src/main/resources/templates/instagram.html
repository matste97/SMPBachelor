<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instagram</title>
    <link rel="stylesheet" type="text/css" th:href="@{/styles/instagram.css}">
    <script th:src="@{/js/Navigation.js}"></script>
    <script th:src="@{/js/Instagram.js}" th:attr="data-insightsData=${insightsData}"></script>

</head>
<body>
    <nav th:replace="~{components/navigation}"></nav>
    <h1>INSTAGRAM PAGE</h1>
    <!-- Display the follower count -->
    <h2 th:if="${followersCount != null}" th:text="'FÃ¸lgere: ' + ${followersCount}"></h2>
    <!-- Handle the case when follower count is not available -->
    <h2 th:if="${followersCount == null}">Follower count not available</h2>
    
    <div class="grid-container" th:if="${latestPosts != null and latestPosts.size() > 0}">
        <div class="grid-item" th:each="post : ${latestPosts}">
            <!-- Check if media is available -->
            <div th:if="${post.media_url != null}">
                <!-- Display thumbnail -->
                <img class="thumbnail" th:if="${post.media_type == 'IMAGE'}" th:src="${post.media_url}" th:alt="${post.caption} ? ${post.caption} : 'Missing thumbnail'"/> 
                <img class="thumbnail" th:if="${post.media_type != 'IMAGE'}" src="/path/to/placeholder_thumbnail.jpg" alt="Placeholder Thumbnail"/> 
            </div>
            <!-- Display caption -->
            <div>
                <div class="caption" th:if="${post.caption != null}" th:text="${post.caption}"></div> 
                <div th:text="${post.timestamp}"></div> 
            </div>
        </div>
    </div>
    
    <!-- Display message if latest posts retrieval fails -->
    <div th:if="${latestPosts == null or latestPosts.size() == 0}">
        <p>Failed to retrieve latest posts.</p>
    </div>

    <!-- Add a canvas element for the chart -->
    <canvas id="insightsChart"></canvas>

    <script th:inline="javascript">
        console.log(insightsData)
        createChart(insightsData)
    </script>

</body>
</html>
